#!/usr/bin/env node
var debug = require('debug')('student');
var app = require('../app');


app.set('port', process.env.PORT || 3000);

var server = app.listen(app.get('port'), function() {
  debug('Express server listening on port ' + server.address().port);
});


var io = require('socket.io')(server);
io.on('connection', function(socket) {
	var socketRoom;
	socket.on('join', function(room) {
		socketRoom = room;
		console.log('joining room:', room);
		socket.join(room);
	})
	
	socket.on('send message', function(message) {
		console.log('hit it :', message)
		io.to(socketRoom).emit('new message', message.message)
	})
})


